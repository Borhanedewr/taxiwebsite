<header>
  <div class="container">
    <div class="header-content">
      <div class="logo">
        <a href="{{ '/' | relative_url }}">Taxi<span class="highlight">Go</span>‎ Neumünster</a>
      </div>
      <nav>
        <input type="checkbox" id="nav-toggle">
        <label for="nav-toggle" class="nav-toggle-label">
          <span></span>
        </label>
        <ul class="nav-menu">
          {% assign is_en = page.lang == 'en' or page.url contains '/en/' %}
          {% if is_en %}
            <li><a href="/en/" {% if page.url == '/en/' %}class="active"{% endif %}>Home</a></li>
            <li><a href="/en/leistungen/" {% if page.url contains '/en/leistungen' %}class="active"{% endif %}>Services</a></li>
            <li><a href="/en/ueber-uns/" {% if page.url contains '/en/ueber-uns' %}class="active"{% endif %}>About</a></li>
            <li><a href="/en/contact/" {% if page.url contains '/en/contact' %}class="active"{% endif %}>Contact</a></li>
            <li>
              <a href="/en/qr/" class="btn-order">
                <span class="btn-order-svg" aria-hidden="true" style="display:inline-block;vertical-align:middle;width:1.7em;height:1em;margin-right:0.5em;line-height:0;">
                  <svg style="scale: 1.4; rotate: 45deg" width="100%" height="100%" viewBox="0 0 2000 1000" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false">
                    <g>
                      <path d="m 469.47242,102.80848 c 180.80494,0 502.69549,242.03857 635.50638,348.16324 31.6513,25.44507 31.6513,72.61158 0,98.05669 -132.81089,106.1246 -454.70144,348.16311 -635.50638,348.16311 -219.28286,0 -397.191542,-177.90858 -397.191542,-397.19149 0,-219.28275 177.908682,-397.19156 397.191542,-397.19155 z" style="fill:#ff0000;stroke:#000000;stroke-width:70;"/>
                      <text x="251.8175" y="682.95233" style="font-family:Roboto,Arial,sans-serif;font-weight:900;font-size:692.33px;fill:#ffffff;">to</text>
                      <text x="1237.2054" y="682.95233" style="font-family:Roboto,Arial,sans-serif;font-weight:900;font-size:692.33px;fill:#000000;">yu</text>
                    </g>
                  </svg>
                </span>
                Order online
              </a>
            </li>
          {% else %}
            <li><a href="{{ '/' | relative_url }}" {% if page.url == '/' %}class="active"{% endif %}>Startseite</a></li>
            <li><a href="{{ '/leistungen/' | relative_url }}" {% if page.url contains 'leistungen' %}class="active"{% endif %}>Leistungen</a></li>
            <li><a href="{{ '/ueber-uns/' | relative_url }}" {% if page.url contains 'ueber-uns' %}class="active"{% endif %}>Über uns</a></li>
            <li><a href="{{ '/contact/' | relative_url }}" {% if page.url contains 'contact' %}class="active"{% endif %}>Kontakt</a></li>
            <li>
              <a href="{{ '/qr' | relative_url }}" class="btn-order">
                <span class="btn-order-svg" aria-hidden="true" style="display:inline-block;vertical-align:middle;width:1.7em;height:1em;margin-right:0.5em;line-height:0;">
                  <svg style="scale: 1.4; rotate: 45deg" width="100%" height="100%" viewBox="0 0 2000 1000" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false">
                    <g>
                      <path d="m 469.47242,102.80848 c 180.80494,0 502.69549,242.03857 635.50638,348.16324 31.6513,25.44507 31.6513,72.61158 0,98.05669 -132.81089,106.1246 -454.70144,348.16311 -635.50638,348.16311 -219.28286,0 -397.191542,-177.90858 -397.191542,-397.19149 0,-219.28275 177.908682,-397.19156 397.191542,-397.19155 z" style="fill:#ff0000;stroke:#000000;stroke-width:70;"/>
                      <text x="251.8175" y="682.95233" style="font-family:Roboto,Arial,sans-serif;font-weight:900;font-size:692.33px;fill:#ffffff;">to</text>
                      <text x="1237.2054" y="682.95233" style="font-family:Roboto,Arial,sans-serif;font-weight:900;font-size:692.33px;fill:#000000;">yu</text>
                    </g>
                  </svg>
                </span>
                Online bestellen
              </a>
            </li>
          {% endif %}
        </ul>
      </nav>
    </div>
  </div>
</header>

<nav style="text-align:right; margin:0.5rem 1rem 1rem 0;">
  <a href="{{ page.url | replace:'/en/','/' | relative_url }}" {% unless page.lang == 'en' %}style="font-weight:bold;"{% endunless %}>Deutsch</a> |
  {% assign is_en = page.lang == 'en' or page.url contains '/en/' %}
  {% if is_en %}
    <a href="{{ page.url | relative_url }}" style="font-weight:bold;">English</a>
  {% else %}
    <a href="{{ '/en' | append: page.url | replace:'//en','/en' | relative_url }}">English</a>
  {% endif %}
</nav>
<!-- Floating Order Button for Mobile -->
<a href="{% assign is_en = page.lang == 'en' or page.url contains '/en/' %}{% if is_en %}/en/qr/{% else %}{{ '/qr' | relative_url }}{% endif %}" class="btn-order-mobile" style="display:none">
  <span class="btn-order-svg" aria-hidden="true" style="display:inline-block;vertical-align:middle;width:1.7em;height:1em;margin-right:0.5em;line-height:0;">
    <svg style="scale: 1.4; rotate: 45deg" width="100%" height="100%" viewBox="0 0 2000 1000" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false">
      <g>
        <path d="m 469.47242,102.80848 c 180.80494,0 502.69549,242.03857 635.50638,348.16324 31.6513,25.44507 31.6513,72.61158 0,98.05669 -132.81089,106.1246 -454.70144,348.16311 -635.50638,348.16311 -219.28286,0 -397.191542,-177.90858 -397.191542,-397.19149 0,-219.28275 177.908682,-397.19156 397.191542,-397.19155 z" style="fill:#ff0000;stroke:#000000;stroke-width:70;"/>
        <text x="251.8175" y="682.95233" style="font-family:Roboto,Arial,sans-serif;font-weight:900;font-size:692.33px;fill:#ffffff;">to</text>
        <text x="1237.2054" y="682.95233" style="font-family:Roboto,Arial,sans-serif;font-weight:900;font-size:692.33px;fill:#000000;">yu</text>
      </g>
    </svg>
  </span>
  {% if is_en %}Order online{% else %}Online bestellen{% endif %}
</a>
<script>
  // Floating Button Sichtbarkeit
  function toggleOrderBtn() {
    const btn = document.querySelector('.btn-order-mobile');
    if (window.innerWidth <= 900) {
      btn.style.display = 'flex';
    } else {
      btn.style.display = 'none';
    }
  }
  window.addEventListener('resize', toggleOrderBtn);
  window.addEventListener('DOMContentLoaded', toggleOrderBtn);

  // Sprachweiterleitung nur beim ersten Besuch
  document.addEventListener('DOMContentLoaded', function() {
    if(!localStorage.getItem('langSelected')) {
      var userLang = (navigator.language || navigator.userLanguage || '').toLowerCase();
      if(userLang.startsWith('en') && !window.location.pathname.startsWith('/en/')) {
        window.location.href = '/en/';
      }
    }
    // Klick auf Sprachlinks merkt Auswahl
    var langLinks = document.querySelectorAll('nav a[href*="/en"], nav a[href*="/"]');
    langLinks.forEach(function(link) {
      link.addEventListener('click', function() {
        if(link.textContent.trim().toLowerCase().includes('deutsch')) {
          localStorage.setItem('langSelected', 'de');
        } else {
          localStorage.setItem('langSelected', 'en');
        }
      });
    });
  });
</script>
